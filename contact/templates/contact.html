{% extends "base.html" %}
{% load static i18n %}

{% block content %}

<!-- Hero Section -->
<div
  class="contact-hero lazyload"
  data-bg="https://res.cloudinary.com/dvs5uituk/image/upload/w_1000,ar_16:9,c_fill,g_auto,e_sharpen/freepik__many-white-doves-flying-with-little-postal-package__76480_1_q98v3e.webp">
  <div class="hero-overlay-contact">
    <h2 class="hero-title-contact">{% trans "We would love to hear from you." %}</h2>
    <p class="hero-subtitle-contact">
      {% trans "If you are part of our community and this blog stirs something in your spirit—whether it brings feelings of anger, sadness, confusion, or hope—please don’t hesitate to reach out. With the Lord’s guidance, I will do my best to support and walk alongside you." %}
    </p>
  </div>
</div>

<div class="container mt-5">
  <h2 class="text-center mb-4" style="color: #fbf7f4;">{% trans "Contact Me" %}</h2>

  <div class="row justify-content-center">
    <!-- Contact Form -->
    <div class="col-md-6">
      <form method="POST" class="contact-form p-4 border rounded shadow-sm">
        {% csrf_token %}

        <div class="mb-3">
          <label for="id_name" class="form-label">{% trans "Name" %}</label>
          <input type="text" class="form-control" name="name" id="id_name" required>
        </div>

        <div class="mb-3">
          <label for="id_email" class="form-label">{% trans "Email" %}</label>
          <input type="email" class="form-control" name="email" id="id_email" required>
        </div>

        <div class="mb-3">
          <label for="id_subject" class="form-label">{% trans "Subject" %}</label>
          <input type="text" class="form-control" name="subject" id="id_subject" required>
        </div>

        <div class="mb-3">
          <label for="id_message" class="form-label">{% trans "Message" %}</label>
          <textarea class="form-control" name="message" id="id_message" rows="4" required></textarea>
        </div>

        <button type="submit" class="btn btn-primary w-100">{% trans "Send Message" %}</button>
      </form>
    </div>

    <!-- Helpline Section -->
    <div class="col-md-4 d-flex flex-column justify-content-center">
      <div class="p-4 border rounded shadow-sm bg-light">
        <h5 class="text-center">{% trans "Do you need to speak to someone?" %}</h5>
        <p class="text-muted text-center">
          {% trans "If you need urgent support or guidance, as a member of the LGBTA++ community or a parent, please reach out. We are here to help." %}
        </p>
        <button
          type="button"
          class="btn btn-primary w-100"
          data-bs-toggle="modal"
          data-bs-target="#helplineModal"
        >
          {% trans "Contact Helpline" %}
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Hidden div to consume messages -->
<div id="message-container" style="display: none">
  {% for message in messages %}
  <span class="message-content">{{ message }}</span>
  {% endfor %}
</div>

<!-- Confirmation Modal -->
<div
  class="modal fade"
  id="confirmationModal"
  tabindex="-1"
  aria-labelledby="confirmationModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="confirmationModalLabel">{% trans "Success!" %}</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="{% trans 'Close' %}"
        ></button>
      </div>
      <div class="modal-body">
        {% trans "Your message has been sent successfully. We will get back to you soon! God bless!" %}
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          {% trans "Close" %}
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Helpline Modal -->
<div
  class="modal fade"
  id="helplineModal"
  tabindex="-1"
  aria-labelledby="helplineModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="helplineModalLabel">{% trans "Helpline Information" %}</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="{% trans 'Close' %}"
        ></button>
      </div>
      <div class="modal-body">
        <p>{% trans "If you need immediate assistance, please reach out:" %}</p>
        <ul>
          <li><strong>{% trans "Phone" %}:</strong> +1 (800) 123-4567</li>
          <li><strong>{% trans "Email" %}:</strong> support@example.com</li>
          <li><strong>{% trans "Live Chat" %}:</strong> {% trans "Available 24/7 on our website" %}</li>
        </ul>
        <p>{% trans "We are here to help and guide you with the Lord’s wisdom. You are not alone!" %}</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          {% trans "Close" %}
        </button>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    var messageContainer = document.getElementById("message-container");
    if (messageContainer && messageContainer.textContent.trim() !== "") {
      var confirmationModal = new bootstrap.Modal(
        document.getElementById("confirmationModal")
      );
      confirmationModal.show();
    }
  });
</script>

{% endblock %}

{% block extra_js %}
<script defer src="{% static 'js/lazyload.js' %}"></script>
{% endblock %}
